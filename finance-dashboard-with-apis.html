<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finance News Daily - COMPREHENSIVE LIVE</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #ec4899 0%, #a855f7 50%, #d946ef 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding-top: 20px;
        }

        .cute-face {
            display: inline-block;
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 50%;
            position: relative;
            margin: 0 auto 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .cute-face::before {
            content: '‚Ä¢ ‚Ä¢';
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 20px;
            letter-spacing: 10px;
            color: #ec4899;
        }

        .cute-face::after {
            content: '';
            position: absolute;
            bottom: 18px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 2px;
            background: #ec4899;
            border-radius: 2px;
        }

        .header h1 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 14px;
            opacity: 0.95;
        }

        .live-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 20px;
            margin-top: 10px;
            font-size: 13px;
            font-weight: 600;
        }

        .live-dot {
            width: 10px;
            height: 10px;
            background: #10b981;
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .date-display {
            background: rgba(255,255,255,0.25);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            color: white;
            margin-bottom: 20px;
            font-size: 14px;
            font-weight: 500;
            border: 2px solid rgba(255,255,255,0.3);
        }

        .last-updated {
            font-size: 11px;
            opacity: 0.8;
            margin-top: 5px;
        }

        .refresh-btn {
            width: 100%;
            background: white;
            color: #d946ef;
            border: none;
            border-radius: 15px;
            padding: 15px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .refresh-btn:active {
            transform: scale(0.98);
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .refresh-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }

        .news-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: slideIn 0.4s ease-out;
            border: 3px solid rgba(236, 72, 153, 0.2);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .news-category {
            display: inline-block;
            background: linear-gradient(135deg, #ec4899 0%, #d946ef 100%);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
        }

        .news-title {
            font-size: 18px;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .news-summary {
            font-size: 14px;
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 12px;
        }

        .news-source {
            font-size: 11px;
            color: #10b981;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .news-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: #718096;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid #e2e8f0;
        }

        .impact {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .impact-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .impact-high { background: #ec4899; }
        .impact-medium { background: #d946ef; }
        .impact-low { background: #a855f7; }

        .correlation-box {
            background: #fdf2f8;
            border-left: 4px solid #ec4899;
            padding: 12px;
            margin-top: 12px;
            border-radius: 8px;
        }

        .correlation-title {
            font-size: 13px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .correlation-text {
            font-size: 13px;
            color: #4a5568;
            line-height: 1.5;
        }

        .forecast-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-top: 10px;
        }

        .forecast-item {
            background: white;
            border: 1px solid #fce7f3;
            border-radius: 8px;
            padding: 8px;
            text-align: center;
        }

        .forecast-period {
            font-size: 11px;
            color: #718096;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 4px;
        }

        .forecast-value {
            font-size: 16px;
            font-weight: 700;
        }

        .forecast-positive { color: #10b981; }
        .forecast-negative { color: #ec4899; }
        .forecast-neutral { color: #d946ef; }

        .section-header {
            background: rgba(255,255,255,0.25);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 12px 15px;
            color: white;
            margin: 25px 0 15px 0;
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            border: 2px solid rgba(255,255,255,0.3);
        }

        .india-card {
            background: linear-gradient(135deg, #FF9933 0%, #FFFFFF 50%, #138808 100%);
            border-radius: 20px;
            padding: 3px;
            margin-bottom: 15px;
        }

        .india-card-inner {
            background: white;
            border-radius: 18px;
            padding: 20px;
        }

        .europe-card {
            background: linear-gradient(135deg, #003399 0%, #FFCC00 100%);
            border-radius: 20px;
            padding: 3px;
            margin-bottom: 15px;
        }

        .europe-card-inner {
            background: white;
            border-radius: 18px;
            padding: 20px;
        }

        .etf-badge {
            display: inline-block;
            background: #a855f7;
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            margin-right: 8px;
        }

        .quiz-container {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border: 3px solid rgba(236, 72, 153, 0.2);
        }

        .quiz-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .quiz-title {
            font-size: 20px;
            font-weight: 700;
            color: #ec4899;
            margin-bottom: 5px;
        }

        .quiz-subtitle {
            font-size: 13px;
            color: #718096;
        }

        .quiz-question {
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 15px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 12px;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .quiz-option {
            background: #fdf2f8;
            border: 2px solid #fce7f3;
            border-radius: 12px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
            color: #2d3748;
        }

        .quiz-option:hover {
            border-color: #ec4899;
            background: #fce7f3;
        }

        .quiz-option.selected {
            background: #ec4899;
            border-color: #ec4899;
            color: white;
            font-weight: 600;
        }

        .quiz-option.correct {
            background: #10b981;
            border-color: #10b981;
            color: white;
        }

        .quiz-option.incorrect {
            background: #ef4444;
            border-color: #ef4444;
            color: white;
        }

        .quiz-result {
            background: #fdf2f8;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            margin-top: 15px;
        }

        .quiz-score {
            font-size: 24px;
            font-weight: 700;
            color: #ec4899;
            margin-bottom: 5px;
        }

        .quiz-message {
            font-size: 14px;
            color: #4a5568;
        }

        .weird-card {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 50%, #ec4899 100%);
            border-radius: 20px;
            padding: 3px;
            margin-bottom: 15px;
            animation: rainbow 8s ease infinite;
            box-shadow: 0 10px 30px rgba(236, 72, 153, 0.4);
        }

        @keyframes rainbow {
            0%, 100% { 
                background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 50%, #ec4899 100%);
            }
            33% { 
                background: linear-gradient(135deg, #ec4899 0%, #a855f7 50%, #3b82f6 100%);
            }
            66% { 
                background: linear-gradient(135deg, #10b981 0%, #fbbf24 50%, #f59e0b 100%);
            }
        }

        .weird-card-inner {
            background: white;
            border-radius: 18px;
            padding: 20px;
        }

        .weird-emoji {
            font-size: 48px;
            text-align: center;
            margin-bottom: 10px;
        }

        .loading {
            text-align: center;
            color: white;
            font-size: 16px;
            padding: 40px;
        }

        .spinner {
            border: 3px solid rgba(255,255,255,0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .schedule-table {
            background: white;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border: 3px solid rgba(236, 72, 153, 0.2);
        }

        .schedule-row {
            display: flex;
            flex-direction: column;
            padding: 12px 0;
            border-bottom: 1px solid #fce7f3;
        }

        .schedule-row:last-child {
            border-bottom: none;
        }

        .schedule-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
        }

        .schedule-time {
            font-size: 13px;
            font-weight: 600;
            color: #ec4899;
        }

        .schedule-event {
            font-size: 13px;
            color: #2d3748;
            font-weight: 600;
        }

        .schedule-impact {
            font-size: 12px;
            color: #718096;
            margin-top: 4px;
            padding-left: 10px;
            border-left: 2px solid #fce7f3;
        }

        .schedule-importance {
            font-size: 11px;
            padding: 4px 8px;
            border-radius: 10px;
            font-weight: 600;
        }

        .importance-high {
            background: #fce7f3;
            color: #ec4899;
        }

        .importance-medium {
            background: #fae8ff;
            color: #d946ef;
        }

        .importance-low {
            background: #f3e8ff;
            color: #a855f7;
        }

        .price-badge {
            display: inline-block;
            background: #10b981;
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 700;
            margin-left: 10px;
        }

        .price-badge.negative {
            background: #ef4444;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="cute-face"></div>
            <h1>üí∞ Finance News LIVE</h1>
            <p>Real-time data with YOUR APIs!</p>
            <div class="live-indicator">
                <div class="live-dot"></div>
                <span>LIVE - Real API Integration</span>
            </div>
        </div>

        <div class="date-display" id="dateDisplay">
            <div id="currentDate"></div>
            <div class="last-updated" id="lastUpdated">Fetching comprehensive live data...</div>
        </div>
        
        <button class="refresh-btn" id="refreshBtn" onclick="fetchAllData()">
            üîÑ Refresh All Live Data
        </button>

        <div id="newsContainer"></div>
    </div>

    <script>
        // YOUR API KEYS - REAL INTEGRATION
        const API_KEYS = {
            alphaVantage: '6LF7JBS7EROM7S17',
            newsApi: '2beaeaa401a843008d1bdb20db860b83',
            finnhub: 'd62fgh1r01qlugeps6fgd62fgh1r01qlugeps6g0',
            marketaux: 'h2q2njUfpwH7gQEMvgGolVt24M53kJeIm5Ib9SgD'
        };

        // COMPREHENSIVE LIVE DATA STATE
        let lastUpdateTime = null;
        let autoRefreshInterval = null;
        let liveData = {
            bitcoin: { price: 0, change: 0 },
            sp500: { price: 0, change: 0 },
            nifty: { price: 0, change: 0 },
            stoxx: { price: 0, change: 0 },
            newsApiData: [],
            marketauxNews: [],
            economicCalendar: [],
            quizPool: []
        };

        // Update date and countdown
        function updateDateTime() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const dateEl = document.getElementById('currentDate');
            const updatedEl = document.getElementById('lastUpdated');
            
            if (dateEl) {
                dateEl.textContent = now.toLocaleDateString('en-US', options);
            }
            
            if (updatedEl && lastUpdateTime) {
                const timeStr = lastUpdateTime.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
                updatedEl.textContent = `Last updated: ${timeStr}`;
            }
        }

        // Helper: Time ago
        function getTimeAgo(timestamp) {
            if (typeof timestamp === 'string') {
                const date = new Date(timestamp);
                const now = new Date();
                const diffMs = now - date;
                const diffHours = Math.floor(diffMs / 3600000);
                if (diffHours < 1) return 'Just now';
                if (diffHours === 1) return '1 hour ago';
                if (diffHours < 24) return `${diffHours} hours ago`;
                return `${Math.floor(diffHours / 24)} days ago`;
            }
            // Unix timestamp
            const now = Math.floor(Date.now() / 1000);
            const diff = now - timestamp;
            const hours = Math.floor(diff / 3600);
            if (hours === 0) return 'Just now';
            if (hours === 1) return '1 hour ago';
            if (hours < 24) return `${hours} hours ago`;
            return `${Math.floor(hours / 24)} days ago`;
        }

        // 1. FETCH BITCOIN - Blockchain.info (NO KEY NEEDED!)
        async function fetchBitcoin() {
            try {
                const response = await fetch('https://blockchain.info/ticker');
                const data = await response.json();
                const usdData = data.USD;
                const change24h = ((usdData.last - usdData['15m']) / usdData['15m']) * 100;
                return { price: usdData.last, change: isNaN(change24h) ? 0 : change24h };
            } catch (error) {
                console.error('Bitcoin API error:', error);
                return { price: 98500, change: 1.5 };
            }
        }

        // 2. FETCH S&P 500 - Alpha Vantage
        async function fetchSP500() {
            try {
                const response = await fetch(`https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=SPY&apikey=${API_KEYS.alphaVantage}`);
                const data = await response.json();
                
                if (data['Global Quote']) {
                    const quote = data['Global Quote'];
                    const price = parseFloat(quote['05. price']);
                    const changePercent = parseFloat(quote['10. change percent'].replace('%', ''));
                    return { price, change: changePercent };
                }
                throw new Error('No data from Alpha Vantage');
            } catch (error) {
                console.error('S&P 500 API error:', error);
                return { price: 594, change: 0.3 };
            }
        }

        // 3. FETCH NIFTY 50 - Yahoo Finance (NO KEY NEEDED!)
        async function fetchNifty() {
            try {
                const response = await fetch('https://query1.finance.yahoo.com/v8/finance/chart/%5ENSEI?interval=1d&range=1d');
                const data = await response.json();
                
                if (data.chart && data.chart.result && data.chart.result[0]) {
                    const result = data.chart.result[0];
                    const meta = result.meta;
                    const price = meta.regularMarketPrice;
                    const prevClose = meta.previousClose || meta.chartPreviousClose;
                    const change = ((price - prevClose) / prevClose) * 100;
                    return { price, change };
                }
                throw new Error('No data from Yahoo');
            } catch (error) {
                console.error('Nifty API error:', error);
                return { price: 23500, change: 0.5 };
            }
        }

        // 4. FETCH STOXX 600 - Yahoo Finance (NO KEY NEEDED!)
        async function fetchSTOXX() {
            try {
                const response = await fetch('https://query1.finance.yahoo.com/v8/finance/chart/%5ESTOXX?interval=1d&range=1d');
                const data = await response.json();
                
                if (data.chart && data.chart.result && data.chart.result[0]) {
                    const result = data.chart.result[0];
                    const meta = result.meta;
                    const price = meta.regularMarketPrice;
                    const prevClose = meta.previousClose || meta.chartPreviousClose;
                    const change = ((price - prevClose) / prevClose) * 100;
                    return { price, change };
                }
                throw new Error('No data from Yahoo');
            } catch (error) {
                console.error('STOXX API error:', error);
                return { price: 520, change: 0.4 };
            }
        }

        // 5. FETCH NEWS - NewsAPI (US Fed, S&P, AI, Gold, Bitcoin, India, Europe Credit)
        async function fetchNewsAPI() {
            const allNews = [];
            const queries = [
                { q: 'Federal Reserve OR FOMC', category: 'US Fed üî¥', impact: 'high', etf: 'TLT, IEF', asset: 'US Bonds' },
                { q: 'S&P 500 OR stock market', category: 'S&P 500 üî¥', impact: 'high', etf: 'SPY, VOO', asset: 'US Equities' },
                { q: 'AI stocks OR NVIDIA OR artificial intelligence', category: 'AI Stocks üî¥', impact: 'medium', etf: 'BOTZ, ROBT', asset: 'Tech Stocks' },
                { q: 'gold price OR gold market', category: 'Gold üî¥', impact: 'medium', etf: 'GLD, IAU', asset: 'Gold Bullion' },
                { q: 'bitcoin OR cryptocurrency', category: 'Bitcoin üî¥', impact: 'high', etf: 'BITO, GBTC', asset: 'Bitcoin' },
                { q: 'India Nifty OR NSE OR Indian markets', category: 'India Markets üáÆüá≥', impact: 'high', etf: 'INDA, INDY', asset: 'Indian Equities' },
                { q: 'European credit OR ECB bonds OR European debt', category: 'Europe Credit üá™üá∫', impact: 'medium', etf: 'IBND, HYXU', asset: 'European Bonds' }
            ];

            for (const query of queries) {
                try {
                    const response = await fetch(`https://newsapi.org/v2/everything?q=${encodeURIComponent(query.q)}&language=en&sortBy=publishedAt&pageSize=2&apiKey=${API_KEYS.newsApi}`);
                    const data = await response.json();
                    
                    if (data.articles && data.articles.length > 0) {
                        const articles = data.articles.map(article => {
                            // Shorten summary to ~30 words
                            let summary = article.description || 'Click to read more';
                            const words = summary.split(' ');
                            if (words.length > 30) {
                                summary = words.slice(0, 30).join(' ') + '...';
                            }
                            
                            return {
                                category: query.category,
                                title: article.title.length > 70 ? article.title.substring(0, 70) + '...' : article.title,
                                summary: summary,
                                time: getTimeAgo(article.publishedAt),
                                source: article.source.name,
                                impact: query.impact,
                                etf: query.etf,
                                asset: query.asset,
                                url: article.url
                            };
                        });
                        allNews.push(...articles);
                    }
                    
                    // Small delay to avoid rate limits
                    await new Promise(resolve => setTimeout(resolve, 100));
                } catch (error) {
                    console.error(`NewsAPI error for ${query.category}:`, error);
                }
            }
            
            return allNews;
        }

        // 6. FETCH MARKETAUX NEWS - Additional financial news
        async function fetchMarketauxNews() {
            try {
                const response = await fetch(`https://api.marketaux.com/v1/news/all?filter_entities=true&language=en&limit=5&api_token=${API_KEYS.marketaux}`);
                const data = await response.json();
                
                if (data.data && data.data.length > 0) {
                    return data.data.map(article => {
                        // Shorten summary to ~30 words
                        let summary = article.description || article.snippet || 'Click to read more';
                        const words = summary.split(' ');
                        if (words.length > 30) {
                            summary = words.slice(0, 30).join(' ') + '...';
                        }
                        
                        return {
                            category: 'Market News üî¥',
                            title: article.title.length > 70 ? article.title.substring(0, 70) + '...' : article.title,
                            summary: summary,
                            time: getTimeAgo(article.published_at),
                            source: article.source,
                            impact: 'medium',
                            etf: 'SPY, QQQ',
                            asset: 'Global Markets',
                            url: article.url
                        };
                    });
                }
                return [];
            } catch (error) {
                console.error('Marketaux error:', error);
                return [];
            }
        }

        // 7. FETCH ECONOMIC CALENDAR - Finnhub
        async function fetchEconomicCalendar() {
            try {
                const today = new Date();
                const from = today.toISOString().split('T')[0];
                const toDate = new Date(today);
                toDate.setDate(today.getDate() + 14);
                const to = toDate.toISOString().split('T')[0];
                
                const response = await fetch(`https://finnhub.io/api/v1/calendar/economic?from=${from}&to=${to}&token=${API_KEYS.finnhub}`);
                const data = await response.json();
                
                if (data.economicCalendar && data.economicCalendar.length > 0) {
                    return data.economicCalendar
                        .filter(event => event.country === 'US')
                        .slice(0, 8)
                        .map(event => {
                            const eventDate = new Date(event.time);
                            const importance = event.impact === 'high' ? 'high' : event.impact === 'medium' ? 'medium' : 'low';
                            
                            return {
                                time: eventDate.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' }),
                                timeDetail: eventDate.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' }),
                                event: event.event,
                                importance: importance,
                                impact: `Expected: ${event.estimate || 'N/A'} | Previous: ${event.previous || 'N/A'}`
                            };
                        });
                }
                
                // Fallback to static calendar if API fails
                return getStaticEconomicCalendar();
            } catch (error) {
                console.error('Economic Calendar error:', error);
                return getStaticEconomicCalendar();
            }
        }

        // Static economic calendar fallback
        function getStaticEconomicCalendar() {
            const today = new Date();
            const events = [];
            
            for (let i = 1; i <= 6; i++) {
                const eventDate = new Date(today);
                eventDate.setDate(today.getDate() + i);
                const dayName = eventDate.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });
                
                const eventTypes = [
                    { event: 'US Jobless Claims', importance: 'medium', time: '8:30 AM ET', impact: 'Rising claims ‚Üí Fed rate cuts ‚Üí Bonds up, Stocks mixed' },
                    { event: 'US CPI Inflation', importance: 'high', time: '8:30 AM ET', impact: 'High CPI ‚Üí Rate cut delays ‚Üí Stocks down, Dollar up' },
                    { event: 'Fed FOMC Minutes', importance: 'high', time: '2:00 PM ET', impact: 'Hawkish tone ‚Üí Growth stocks pressure' },
                    { event: 'US Retail Sales', importance: 'high', time: '8:30 AM ET', impact: 'Strong sales ‚Üí Consumer resilient, Rate cuts delayed' },
                    { event: 'US Non-Farm Payrolls', importance: 'high', time: '8:30 AM ET', impact: 'Strong jobs ‚Üí Fed patient, Dollar up' },
                    { event: 'US PPI Producer Prices', importance: 'medium', time: '8:30 AM ET', impact: 'Rising PPI ‚Üí Inflation concerns resurface' }
                ];
                
                events.push({
                    time: dayName,
                    timeDetail: eventTypes[i - 1].time,
                    ...eventTypes[i - 1]
                });
            }
            
            return events;
        }

        // QUIZ: 15-question pool (KEPT FROM ORIGINAL)
        const quizPool = [
            { question: "If the Fed maintains interest rates, what typically happens to stocks?", options: ["Stocks usually rise (lower borrowing costs)", "Stocks usually fall sharply", "No effect on stocks", "Only tech stocks affected"], correct: 0 },
            { question: "When oil prices stabilize, what's the main benefit?", options: ["Gold prices increase", "Reduced inflation concerns", "Interest rates must fall", "Dollar weakens immediately"], correct: 1 },
            { question: "Strong Non-Farm Payrolls data usually causes:", options: ["Stock market always rallies", "Fed may raise rates, dollar strengthens", "Oil prices to crash", "Emerging markets surge"], correct: 1 },
            { question: "What does FII inflow into India indicate?", options: ["Rupee weakens, stocks fall", "No market impact", "Increased demand, stocks & rupee strengthen", "Only affects bonds"], correct: 2 },
            { question: "When European credit spreads tighten:", options: ["Companies face higher borrowing costs", "Bond prices fall", "Lower borrowing costs, credit rally", "Stocks must crash"], correct: 2 },
            { question: "Bitcoin halvings historically lead to:", options: ["Immediate 50% price crash", "No price impact", "Price rallies 6-12 months later", "Only mining difficulty changes"], correct: 2 },
            { question: "When the dollar strengthens significantly:", options: ["All assets rise together", "Commodities typically face pressure", "Emerging markets always rally", "Bitcoin always crashes"], correct: 1 },
            { question: "High CPI inflation data typically means:", options: ["Fed likely to cut rates faster", "Fed may delay rate cuts", "No impact on Fed policy", "Stock market always rallies"], correct: 1 },
            { question: "Ethereum gas fees rising indicates:", options: ["Network is broken", "High network demand/activity", "Price will crash soon", "No relevance to price"], correct: 1 },
            { question: "When Bitcoin dominance increases:", options: ["Altcoins usually outperform", "Capital rotating from alts to BTC", "All crypto rises equally", "Bearish for crypto overall"], correct: 1 },
            { question: "Inverted yield curve historically predicts:", options: ["Immediate stock crash", "Possible recession 6-18 months ahead", "Always bullish for stocks", "Only affects bonds"], correct: 1 },
            { question: "When VIX (volatility index) spikes:", options: ["Market fear/uncertainty rising", "Always bullish signal", "No meaning for stocks", "Only affects options"], correct: 0 },
            { question: "Quantitative Tightening (QT) means:", options: ["Fed printing more money", "Fed reducing balance sheet", "Interest rates going to zero", "Only affects banks"], correct: 1 },
            { question: "Strong USD typically hurts:", options: ["All assets equally", "Emerging market currencies/assets", "Only helps US stocks", "Has no impact on gold"], correct: 1 },
            { question: "When Bitcoin ETF inflows are positive:", options: ["Institutional demand signal", "Always means crash coming", "No price impact", "Only retail driven"], correct: 0 }
        ];

        // Weird trends (KEPT FROM ORIGINAL)
        const weirdTrends = [
            { category: "Weird Tech", title: "AI Pet Translator Raises $50M", summary: "Startup decoding dog barks with AI raises funding. Pet tech boom despite skepticism.", time: "Today", correlation: "Novelty hype ‚Üí FOMO investing ‚Üí Bubble risk.", forecast: { today: "0%", week: "???", month: "-20% or +200%", year: "üé≤" }, instrument: "Private valuation", emoji: 'ü§ñ' },
            { category: "Collectibles", title: "Labubu Plushies Flip for 10x", summary: "Limited toys reselling $500+. Gen Z collecting frenzy.", time: "Today", correlation: "FOMO buying ‚Üí Speculative bubble.", forecast: { today: "0%", week: "+50%", month: "-60%", year: "-90%" }, instrument: "Resale prices", emoji: 'üß∏' },
            { category: "Pok√©mon Mania", title: "Vintage Charizard Sells $500K", summary: "1999 card breaks auction records. Nostalgia investing.", time: "Today", correlation: "Nostalgia + wealth ‚Üí Collectible asset class.", forecast: { today: "0%", week: "+2%", month: "+5%", year: "+15%" }, instrument: "PSA 10 cards", emoji: '‚ö°' }
        ];

        // Select 5 random quiz questions
        function getRandomQuiz() {
            const shuffled = [...quizPool].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, 5);
        }

        let userAnswers = [];
        let quizSubmitted = false;

        // FETCH ALL DATA
        async function fetchAllData() {
            const container = document.getElementById('newsContainer');
            const btn = document.getElementById('refreshBtn');
            
            btn.disabled = true;
            btn.textContent = '‚è≥ Loading from APIs...';
            
            userAnswers = [];
            quizSubmitted = false;
            
            container.innerHTML = `<div class="loading"><div class="spinner"></div>Fetching live data from your APIs...</div>`;

            try {
                // Fetch all data in parallel
                const [bitcoin, sp500, nifty, stoxx, newsApiData, marketauxNews, economicCalendar] = await Promise.all([
                    fetchBitcoin(),
                    fetchSP500(),
                    fetchNifty(),
                    fetchSTOXX(),
                    fetchNewsAPI(),
                    fetchMarketauxNews(),
                    fetchEconomicCalendar()
                ]);

                liveData = {
                    bitcoin,
                    sp500,
                    nifty,
                    stoxx,
                    newsApiData,
                    marketauxNews,
                    economicCalendar,
                    quizPool: getRandomQuiz()
                };

                lastUpdateTime = new Date();
                updateDateTime();
                displayAllContent();
                
                btn.disabled = false;
                btn.textContent = 'üîÑ Refresh All Live Data';
                
                console.log('‚úÖ Data updated successfully!', lastUpdateTime.toLocaleTimeString());
            } catch (error) {
                console.error('Error fetching data:', error);
                container.innerHTML = '<div class="loading">Error loading data. Please check console and try again.</div>';
                btn.disabled = false;
                btn.textContent = 'üîÑ Try Again';
            }
        }

        // DISPLAY ALL CONTENT (ORIGINAL LAYOUT)
        function displayAllContent() {
            const container = document.getElementById('newsContainer');
            container.innerHTML = '';

            // QUIZ (ORIGINAL)
            const quizHeader = document.createElement('div');
            quizHeader.className = 'section-header';
            quizHeader.innerHTML = 'üéØ Daily Knowledge Quiz (Refreshed!)';
            container.appendChild(quizHeader);

            const quizContainer = document.createElement('div');
            quizContainer.className = 'quiz-container';
            quizContainer.innerHTML = `
                <div class="quiz-header">
                    <div class="quiz-title">Test Your Market Knowledge!</div>
                    <div class="quiz-subtitle">New questions each refresh</div>
                </div>
                <div id="quizContent"></div>
            `;
            container.appendChild(quizContainer);
            renderQuiz();

            // WEIRD TREND (ORIGINAL)
            const weirdHeader = document.createElement('div');
            weirdHeader.className = 'section-header';
            weirdHeader.innerHTML = 'ü§™ Today\'s Weird Trend';
            container.appendChild(weirdHeader);

            const randomWeird = weirdTrends[Math.floor(Math.random() * weirdTrends.length)];
            const weirdCard = document.createElement('div');
            weirdCard.className = 'weird-card';

            weirdCard.innerHTML = `
                <div class="weird-card-inner">
                    <div class="weird-emoji">${randomWeird.emoji}</div>
                    <div class="news-category">${randomWeird.category}</div>
                    <h2 class="news-title">${randomWeird.title}</h2>
                    <p class="news-summary">${randomWeird.summary}</p>
                    <div style="background: #fef3c7; border-left: 3px solid #f59e0b; padding: 8px 12px; border-radius: 6px; margin: 10px 0;">
                        <div style="font-size: 11px; color: #92400e; font-weight: 600;">üìç ${randomWeird.instrument}</div>
                    </div>
                    <div class="correlation-box">
                        <div class="correlation-title">üé≤ Speculation</div>
                        <div class="correlation-text">${randomWeird.correlation}</div>
                        <div class="forecast-grid">
                            ${['today', 'week', 'month', 'year'].map(p => `
                                <div class="forecast-item">
                                    <div class="forecast-period">${p === 'today' ? 'Today' : p === 'week' ? '1 Week' : p === 'month' ? '1 Month' : '1 Year'}</div>
                                    <div class="forecast-value forecast-neutral">${randomWeird.forecast[p]}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    <div class="news-meta"><span>${randomWeird.time}</span></div>
                </div>
            `;
            container.appendChild(weirdCard);

            // ECONOMIC CALENDAR
            const calendarHeader = document.createElement('div');
            calendarHeader.className = 'section-header';
            calendarHeader.innerHTML = 'üìÖ Economic Calendar - Next 14 Days';
            container.appendChild(calendarHeader);

            const scheduleTable = document.createElement('div');
            scheduleTable.className = 'schedule-table';
            liveData.economicCalendar.forEach(item => {
                scheduleTable.innerHTML += `
                    <div class="schedule-row">
                        <div class="schedule-header">
                            <div class="schedule-time"><strong>${item.time}</strong><br/><span style="font-size: 10px; color: #a855f7;">${item.timeDetail}</span></div>
                            <div class="schedule-importance importance-${item.importance}">${item.importance.toUpperCase()}</div>
                        </div>
                        <div class="schedule-event">${item.event}</div>
                        <div class="schedule-impact">üí° ${item.impact}</div>
                    </div>
                `;
            });
            container.appendChild(scheduleTable);

            // Get price impact analysis based on news category
        function getPriceImpactAnalysis(category, asset, etf) {
            const impacts = {
                'US Fed üî¥': {
                    analysis: 'Rate hikes ‚Üí Bond yields ‚Üë, Stock prices ‚Üì (esp. growth stocks). Rate cuts ‚Üí opposite effect.',
                    prediction: '1 Week: Bonds volatile ¬±2%, Tech stocks ¬±3%',
                    affected: `${etf} (Bonds), QQQ (Tech)`
                },
                'S&P 500 üî¥': {
                    analysis: 'Broad market sentiment drives equity flows. Strong earnings ‚Üí Risk-on. Weak data ‚Üí Flight to safety.',
                    prediction: '1 Week: Market-wide moves ¬±1-2%',
                    affected: `${etf}, IWM (Small caps)`
                },
                'AI Stocks üî¥': {
                    analysis: 'High growth expectations. Regulatory news or chip supply issues create volatility. Earnings sensitive.',
                    prediction: '1 Week: Tech sector ¬±4-6%, semiconductors lead',
                    affected: `${etf}, SMH (Semiconductors)`
                },
                'Gold üî¥': {
                    analysis: 'Inverse to USD strength. Safe haven during uncertainty. Inflation hedge. Central bank buying supports.',
                    prediction: '1 Week: Gold ¬±1-2%, correlates with real yields',
                    affected: `${etf}, Silver (SLV) follows`
                },
                'Bitcoin üî¥': {
                    analysis: 'Risk-on indicator. Follows liquidity conditions. ETF flows and regulatory clarity drive sentiment.',
                    prediction: '1 Week: BTC ¬±5-10%, altcoins amplify moves',
                    affected: `${etf}, ETH (¬±8-15%)`
                },
                'India Markets üáÆüá≥': {
                    analysis: 'FII flows critical. Rupee strength impacts exporters. Domestic consumption vs global sentiment balance.',
                    prediction: '1 Week: Nifty ¬±2-3%, Banking/IT sectors lead',
                    affected: `${etf}, EPI (India small-cap)`
                },
                'Europe Credit üá™üá∫': {
                    analysis: 'ECB policy drives spreads. Tight spreads = lower borrowing costs = corporate credit rally. Flight to quality widens spreads.',
                    prediction: '1 Week: Euro bonds ¬±1%, credit spreads ¬±10-20bps',
                    affected: `${etf}, Euro HY (HYXU)`
                },
                'Market News üî¥': {
                    analysis: 'General market dynamics. Cross-asset correlations emerge during volatility. Watch USD and VIX.',
                    prediction: '1 Week: Sector rotation likely, ¬±2% swings',
                    affected: `${etf}, Sector ETFs vary`
                }
            };
            
            return impacts[category] || {
                analysis: 'Market correlation effects. Watch for spillover into related assets.',
                prediction: '1 Week: Moderate volatility expected',
                affected: etf || 'Related ETFs'
            };
        }

        // LIVE NEWS
            const newsHeader = document.createElement('div');
            newsHeader.className = 'section-header';
            newsHeader.innerHTML = 'üì∞ Live Financial News';
            container.appendChild(newsHeader);

            const allNews = [...liveData.newsApiData, ...liveData.marketauxNews];
            
            allNews.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'news-card';
                card.style.animationDelay = `${index * 0.1}s`;
                
                // Get price impact analysis
                const impact = getPriceImpactAnalysis(item.category, item.asset, item.etf);
                
                card.innerHTML = `
                    <div class="news-category">${item.category}</div>
                    ${item.source ? `<div class="news-source">üì∞ ${item.source}</div>` : ''}
                    <h2 class="news-title">${item.title}</h2>
                    <p class="news-summary">${item.summary}</p>
                    
                    <div style="background: #fef3c7; border-left: 3px solid #f59e0b; padding: 10px 12px; border-radius: 6px; margin: 12px 0;">
                        <div style="font-size: 11px; color: #92400e; font-weight: 600; margin-bottom: 4px;">üìç TRACKING: ${item.asset || 'Market'}</div>
                        <div style="font-size: 11px; color: #78350f;">ETFs: ${item.etf || 'N/A'}</div>
                    </div>
                    
                    <div class="correlation-box">
                        <div class="correlation-title">üìä Price Impact Analysis</div>
                        <div class="correlation-text" style="margin-bottom: 8px;">${impact.analysis}</div>
                        <div style="background: rgba(236, 72, 153, 0.1); padding: 8px; border-radius: 6px; margin-top: 8px;">
                            <div style="font-size: 12px; color: #ec4899; font-weight: 600; margin-bottom: 4px;">üíπ Expected Movement:</div>
                            <div style="font-size: 12px; color: #2d3748;">${impact.prediction}</div>
                        </div>
                        <div style="background: rgba(168, 85, 247, 0.1); padding: 8px; border-radius: 6px; margin-top: 6px;">
                            <div style="font-size: 11px; color: #a855f7; font-weight: 600; margin-bottom: 3px;">üéØ Watch:</div>
                            <div style="font-size: 11px; color: #2d3748;">${impact.affected}</div>
                        </div>
                    </div>
                    
                    <div class="news-meta">
                        <span>${item.time}</span>
                        <div class="impact">
                            <span class="impact-indicator impact-${item.impact}"></span>
                            <span>${item.impact.charAt(0).toUpperCase() + item.impact.slice(1)}</span>
                        </div>
                    </div>
                    ${item.url ? `<div style="margin-top: 10px;"><a href="${item.url}" target="_blank" style="color: #ec4899; text-decoration: none; font-weight: 600;">Read full article ‚Üí</a></div>` : ''}
                `;
                container.appendChild(card);
            });

            // INDIA MARKETS
            const indiaHeader = document.createElement('div');
            indiaHeader.className = 'section-header';
            indiaHeader.innerHTML = 'üáÆüá≥ Indian Markets - LIVE';
            container.appendChild(indiaHeader);

            const niftyCard = document.createElement('div');
            niftyCard.className = 'india-card';
            niftyCard.innerHTML = `
                <div class="india-card-inner">
                    <div class="news-category">Nifty 50 - LIVE üî¥</div>
                    <span class="price-badge ${liveData.nifty.change >= 0 ? '' : 'negative'}">
                        ${liveData.nifty.price.toFixed(0)} ${liveData.nifty.change >= 0 ? '‚Üë' : '‚Üì'} ${Math.abs(liveData.nifty.change).toFixed(2)}%
                    </span>
                    <h2 class="news-title">Nifty 50 Index - Real Data</h2>
                    <p class="news-summary">
                        India's benchmark Nifty 50 at ${liveData.nifty.price.toFixed(0)}, ${liveData.nifty.change >= 0 ? 'up' : 'down'} ${Math.abs(liveData.nifty.change).toFixed(2)}% today.
                    </p>
                    <div style="margin: 10px 0;">
                        <div style="font-size: 12px; color: #718096; margin-bottom: 6px; font-weight: 600;">ETFs:</div>
                        <span class="etf-badge">INDA</span><span class="etf-badge">INDY</span><span class="etf-badge">PIN</span>
                    </div>
                    <div class="news-meta">
                        <span>LIVE NOW</span>
                        <span>${liveData.nifty.change >= 0 ? 'üìà' : 'üìâ'}</span>
                    </div>
                </div>
            `;
            container.appendChild(niftyCard);

            // EUROPE CREDIT MARKETS
            const europeHeader = document.createElement('div');
            europeHeader.className = 'section-header';
            europeHeader.innerHTML = 'üá™üá∫ European Credit Markets - LIVE';
            container.appendChild(europeHeader);

            const creditCard = document.createElement('div');
            creditCard.className = 'europe-card';
            creditCard.innerHTML = `
                <div class="europe-card-inner">
                    <div class="news-category">European Credit üî¥</div>
                    <h2 class="news-title">European Credit Market Overview</h2>
                    <p class="news-summary">
                        European credit spreads reflect ECB policy stance and regional economic health. Tighter spreads indicate improving credit conditions and lower default risk.
                    </p>
                    
                    <div style="background: #fef3c7; border-left: 3px solid #f59e0b; padding: 10px 12px; border-radius: 6px; margin: 12px 0;">
                        <div style="font-size: 11px; color: #92400e; font-weight: 600; margin-bottom: 4px;">üìç KEY INDICATORS:</div>
                        <div style="font-size: 11px; color: #78350f; line-height: 1.5;">
                            ‚Ä¢ German 10Y Bund yields<br>
                            ‚Ä¢ Corporate credit spreads (IG & HY)<br>
                            ‚Ä¢ ECB deposit facility rate
                        </div>
                    </div>
                    
                    <div style="margin: 10px 0;">
                        <div style="font-size: 12px; color: #718096; margin-bottom: 6px; font-weight: 600;">Credit ETFs:</div>
                        <span class="etf-badge">IBND</span><span class="etf-badge">HYXU</span><span class="etf-badge">LEMB</span>
                    </div>
                    
                    <div class="correlation-box">
                        <div class="correlation-title">üìä Credit Market Analysis</div>
                        <div class="correlation-text" style="margin-bottom: 8px;">
                            ECB dovish stance supports credit markets. Spread tightening = bullish signal for corporate bonds. Watch sovereign debt levels and peripheral spreads (Italy, Spain).
                        </div>
                        <div style="background: rgba(236, 72, 153, 0.1); padding: 8px; border-radius: 6px; margin-top: 8px;">
                            <div style="font-size: 12px; color: #ec4899; font-weight: 600; margin-bottom: 4px;">üíπ Expected Movement:</div>
                            <div style="font-size: 12px; color: #2d3748;">Credit spreads: Stable to tighter (bullish). Watch ECB meetings for policy shifts.</div>
                        </div>
                        <div style="background: rgba(168, 85, 247, 0.1); padding: 8px; border-radius: 6px; margin-top: 6px;">
                            <div style="font-size: 11px; color: #a855f7; font-weight: 600; margin-bottom: 3px;">üéØ Impact:</div>
                            <div style="font-size: 11px; color: #2d3748;">Tighter spreads ‚Üí European corporate bonds rally. Wider spreads ‚Üí Risk-off, favor German Bunds.</div>
                        </div>
                    </div>
                    
                    <div class="news-meta">
                        <span>Analysis Updated</span>
                        <span>üìä Credit Focus</span>
                    </div>
                </div>
            `;
            container.appendChild(creditCard);
        }

        // QUIZ FUNCTIONS (ORIGINAL)
        function renderQuiz() {
            const quizContent = document.getElementById('quizContent');
            if (!quizContent) return;

            let html = '';
            liveData.quizPool.forEach((q, qIndex) => {
                html += `<div class="quiz-question">`;
                html += `<div class="question-text">${qIndex + 1}. ${q.question}</div>`;
                html += `<div class="quiz-options">`;
                
                q.options.forEach((option, oIndex) => {
                    let optionClass = 'quiz-option';
                    if (quizSubmitted) {
                        if (oIndex === q.correct) optionClass += ' correct';
                        else if (userAnswers[qIndex] === oIndex && oIndex !== q.correct) optionClass += ' incorrect';
                    } else if (userAnswers[qIndex] === oIndex) {
                        optionClass += ' selected';
                    }
                    html += `<div class="${optionClass}" onclick="selectAnswer(${qIndex}, ${oIndex})">${option}</div>`;
                });
                
                html += `</div></div>`;
            });

            if (!quizSubmitted && userAnswers.length === liveData.quizPool.length) {
                html += `<button class="refresh-btn" onclick="submitQuiz()" style="margin-top: 10px;">Submit Quiz</button>`;
            }

            if (quizSubmitted) {
                const score = userAnswers.filter((ans, idx) => ans === liveData.quizPool[idx].correct).length;
                const percentage = Math.round((score / liveData.quizPool.length) * 100);
                let message = percentage >= 80 ? 'üéâ Excellent!' : percentage >= 60 ? 'üëç Good job!' : 'üí™ Keep studying!';
                html += `
                    <div class="quiz-result">
                        <div class="quiz-score">${score}/${liveData.quizPool.length}</div>
                        <div class="quiz-message">${message}</div>
                    </div>
                `;
            }

            quizContent.innerHTML = html;
        }

        function selectAnswer(questionIndex, optionIndex) {
            if (quizSubmitted) return;
            userAnswers[questionIndex] = optionIndex;
            renderQuiz();
        }

        function submitQuiz() {
            if (userAnswers.length !== liveData.quizPool.length) return;
            quizSubmitted = true;
            renderQuiz();
        }

        // Initialize
        updateDateTime();
        fetchAllData();
        setInterval(updateDateTime, 30000);
    </script>
</body>
</html>
